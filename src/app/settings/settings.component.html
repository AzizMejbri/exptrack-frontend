<div class="settings-container">
  <!-- Header -->
  <header class="settings-header">
    <h1>Settings</h1>
    <p class="header-description">Customize your expense tracking experience</p>
  </header>

  <!-- Settings Navigation -->
  <nav class="settings-nav">
    <button class="nav-item" [class.active]="activeTab === 'general'" (click)="activeTab = 'general'">
      <span class="nav-icon">‚öôÔ∏è</span>
      <span class="nav-label">General</span>
    </button>
    <button class="nav-item" [class.active]="activeTab === 'budget'" (click)="activeTab = 'budget'">
      <span class="nav-icon">üí∞</span>
      <span class="nav-label">Budget</span>
    </button>
  </nav>

  <!-- Main Settings Content -->
  <div class="settings-content">

    <!-- General Settings -->
    <div *ngIf="activeTab === 'general'" class="settings-section">
      <h2 class="section-title">General Settings</h2>

      <div class="settings-group">
        <h3 class="group-title">Appearance</h3>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Theme</h4>
            <p>Switch between light and dark mode</p>
          </div>
          <div class="setting-control">
            <label class="toggle-switch">
              <input type="checkbox" [checked]="isDarkMode" (change)="toggleTheme()">
              <span class="toggle-slider"></span>
            </label>
            <span class="toggle-label">{{ isDarkMode ? 'Dark' : 'Light' }}</span>
          </div>
        </div>
      </div>

      <div class="settings-group">
        <h3 class="group-title">Preferences</h3>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Currency</h4>
            <p>Select your preferred currency for all transactions</p>
          </div>
          <div class="setting-control">
            <select [(ngModel)]="preferences.currency" (change)="onCurrencyChange()" class="select-control">
              <option *ngFor="let currency of currencies" [value]="currency">{{ currency }}</option>
            </select>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Date Format</h4>
            <p>Choose how dates are displayed throughout the app</p>
          </div>
          <div class="setting-control">
            <select [(ngModel)]="preferences.dateFormat" class="select-control">
              <option *ngFor="let format of dateFormats" [value]="format">{{ format }}</option>
            </select>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Start of Week</h4>
            <p>Set which day your week starts on for weekly reports</p>
          </div>
          <div class="setting-control">
            <select [(ngModel)]="preferences.startOfWeek" class="select-control">
              <option *ngFor="let day of weekStarts" [value]="day">{{ day }}</option>
            </select>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Default Transaction Type</h4>
            <p>Set default for new transactions</p>
          </div>
          <div class="setting-control">
            <select [(ngModel)]="preferences.defaultTransactionType" class="select-control">
              <option value="expense">Expense</option>
              <option value="revenue">Revenue</option>
            </select>
          </div>
        </div>
      </div>

      <div class="settings-group">
        <h3 class="group-title">Notifications & Alerts</h3>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Enable Notifications</h4>
            <p>Receive notifications for important events</p>
          </div>
          <div class="setting-control">
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="preferences.enableNotifications">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Budget Alerts</h4>
            <p>Get notified when approaching budget limits</p>
          </div>
          <div class="setting-control">
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="preferences.budgetAlerts">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Auto Sync</h4>
            <p>Automatically sync data when online</p>
          </div>
          <div class="setting-control">
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="preferences.autoSync">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>

      <div class="settings-actions">
        <button class="btn-primary" (click)="saveSettings()">Save Changes</button>
      </div>
    </div>

    <!-- Budget Settings -->
    <div *ngIf="activeTab === 'budget'" class="settings-section">
      <h2 class="section-title">Budget Settings</h2>

      <div class="budget-summary">
        <div class="budget-card">
          <div class="budget-icon">üí∞</div>
          <div class="budget-info">
            <h3>Monthly Budget</h3>
            <p class="budget-amount">{{ budgetSettings.monthlyBudget | currency:preferences.currency }}</p>
          </div>
          <input type="number" [(ngModel)]="budgetSettings.monthlyBudget" class="budget-input" min="0" step="100">
        </div>

        <div class="budget-card">
          <div class="budget-icon">üìÖ</div>
          <div class="budget-info">
            <h3>Weekly Budget</h3>
            <p class="budget-amount">{{ budgetSettings.weeklyBudget | currency:preferences.currency }}</p>
          </div>
          <input type="number" [(ngModel)]="budgetSettings.weeklyBudget" class="budget-input" min="0" step="50">
        </div>
      </div>

      <div class="settings-group">
        <h3 class="group-title">Budget Alerts</h3>

        <div class="setting-item">
          <div class="setting-info">
            <h4>Enable Budget Alerts</h4>
            <p>Receive notifications when approaching budget limits</p>
          </div>
          <div class="setting-control">
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="budgetSettings.enableBudgetAlerts">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="setting-item" *ngIf="budgetSettings.enableBudgetAlerts">
          <div class="setting-info">
            <h4>Alert Threshold</h4>
            <p>Get alerted when spending reaches this percentage of budget</p>
          </div>
          <div class="setting-control">
            <div class="range-control">
              <input type="range" [(ngModel)]="budgetSettings.alertThreshold" min="50" max="100" step="5">
              <span class="range-value">{{ budgetSettings.alertThreshold }}%</span>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-group">
        <div class="group-header">
          <h3 class="group-title">Category Budgets</h3>
          <button class="btn-secondary" (click)="addBudgetCategory()">+ Add Category</button>
        </div>

        <div *ngFor="let category of budgetSettings.categories; let i = index" class="category-budget">
          <div class="category-header">
            <input type="text" [(ngModel)]="category.name" class="category-name" placeholder="Category name">
            <button class="btn-icon" (click)="removeBudgetCategory(i)" title="Remove category">üóëÔ∏è</button>
          </div>

          <div class="budget-controls">
            <div class="budget-input-group">
              <label>Budget</label>
              <input type="number" [(ngModel)]="category.budget" min="0" class="budget-input-small">
            </div>
            <div class="budget-input-group">
              <label>Spent</label>
              <input type="number" [(ngModel)]="category.spent" min="0" class="budget-input-small" readonly>
            </div>
          </div>

          <div class="budget-progress">
            <div class="progress-bar">
              <div class="progress-fill"
                   [class.over-budget]="getCategoryStatus(category) === 'over-budget'"
                   [class.near-budget]="getCategoryStatus(category) === 'near-budget'"
                   [style.width.%]="getSpentPercentage(category) > 100 ? 100 : getSpentPercentage(category)"></div>
            </div>
            <span class="progress-text"
                  [class.over-budget-text]="getCategoryStatus(category) === 'over-budget'">
              {{ getSpentPercentage(category) | number:'1.0-0' }}%
            </span>
          </div>
        </div>

        <div *ngIf="budgetSettings.categories.length === 0" class="empty-state">
          <p>No budget categories yet. Add one to start tracking!</p>
        </div>
      </div>

      <div class="settings-actions">
        <button class="btn-primary" (click)="saveSettings()">Save Budget Settings</button>
      </div>
    </div>

  </div>
</div>
